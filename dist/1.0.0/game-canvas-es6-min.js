!function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=r(1),i=function(){function t(){o(this,t)}return t.prototype.init=function(){window.G=n.Canvas},t}();(new i).init()},function(t,e,r){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(3),s=function(){function t(e){o(this,t),this.canvas=e,this.context=e.getContext("2d"),this.Draw=i.Draw,this.context.globalAlpha=1,this.w=e.width,this.h=e.height;var r=e.getBoundingClientRect();this.client={x:r.left*(e.width/r.width),y:r.top*(e.height/r.height)},this.data=null}return t.prototype.init=function(){this.addEvent()},t.prototype.addEvent=function(){var t=this;n.Events.forEach(function(e){t.on(e.type,function(r){e.cb.call(t,r)})})},t.prototype.getPosition=function(){var t=this.canvas,e=t.getBoundingClientRect();return{x:e.left*(t.width/e.width),y:e.top*(t.height/e.height)}},t.prototype.clientX=function(){return this.getPosition().x},t.prototype.clientY=function(){return this.getPosition().y},t.prototype.createDraw=function(){return new this.Draw(this.canvas,this.context)},t.prototype.clear=function(){return this.context.clearRect(0,0,this.w,this.h),this},t.prototype.resetDraw=function(){var t=this.Draw.getDraws();this.clear();for(var e=0;e<t.length;e++)t[e].resetDraw()},t.prototype.putData=function(t){return this.context.putImageData(t,0,0),this},t.prototype.getData=function(){return this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},t.prototype.saveData=function(){return this.data=this.getData(),this},t.prototype.restoreData=function(){return this.data&&this.putData(this.data),this},t.prototype.on=function(t,e){var r=this;this.canvas.addEventListener(t,function(t){t.preventDefault(),e.call(r,t)},!1)},t}();e.Canvas=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=[{type:"mousedown",cb:function(t){var e=this,r=this.Draw.getDraws();r.forEach(function(r){if(r.event&&r.event.mousedown&&r.event.mousedown.length){var o=e.getPosition(),n=t.clientX-o.x,i=t.clientY-o.y;r.isPointInPath(n,i)&&r.event.mousedown.forEach(function(e){e.call(r,t)})}})}},{type:"mouseup",cb:function(){}},{type:"mousemove",cb:function(){}},{type:"mouseover",cb:function(){}},{type:"mouseenter",cb:function(){}}],o=r;e.Events=o},function(t,e,r){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),i=r(5),s=n.Util.isObject,a=n.Util.isArray,h=n.Util.isNumber,c=n.Util.isString,p=n.Util.isFunction,l=n.Util.isNode,u=[],f=function(){function t(e,r){o(this,t),this.canvas=e,this.context=r,this.base=new i.Base(this.context),this.draws=[],this.path=[],this.event=null,u.push(this)}return t.getDraws=function(){return u},t.getUUID=function(){for(var t="",e="0123456789abcdefghijklmnopqrstuvwxyz",r=0;36>r;r++)t+=e.charAt(Math.floor(36*Math.random()));return t},t.prototype.clear=function(){return this.draws=[],this},t.prototype.set=function(e,r,o,n){var i=this.draws;if(n){for(var s=null,a=0;a<i.length;a++)if(s=i[a],s.id===n){s.type=e,s.obj=r,s.path=o,s.name=r.name||null;break}}else n=t.getUUID(),this.draws.push({id:n,type:e,obj:r,path:o,name:r.name||null});return this},t.prototype.isPointInPath=function(t,e){var r=this.context,o=this.base,n=this.draws,i=null;r.save(),r.beginPath();for(var s=0;s<n.length;s++)i=n[s],o[i.type].apply(o,i.path);return r.closePath(),r.restore(),r.isPointInPath(t,e)},t.prototype.isPointInPathByName=function(t,e,r){var o=this.context,n=this.base,i=this.draws,s=null;o.save(),o.beginPath();for(var a=0;a<i.length;a++)s=i[a],s.name===t&&n[s.type].apply(n,s.path);return o.closePath(),o.restore(),o.isPointInPath(e,r)},t.prototype.move=function(t){if(!s(t))throw"move param is error";var e=this.draws,r=null,o=null,n=t.left||0,i=t.right||0,h=t.top||0,c=t.bottom||0,p=i-n,l=c-h;if(!p&&!l)return this;for(var u=0;u<e.length;u++){if(r=e[u].obj,o=r.point,a(o))for(var f=0;f<o.length;u++)o[f].x+=p,o[f].y+=l;else o.x+=p,o.y+=l;if(r.controlPoints&&a(r.controlPoints))for(var y=r.controlPoints,f=0;f<y.length;u++)y[f].x+=p,y[f].y+=l}return this},t.prototype.setDraw=function(t,e){for(var r=this.draws,o=null,n=0;n<r.length;n++)if(o=r[n],o.name===t)for(var i in e)hasOwnProperty.call(e,i)&&(o.obj[i]=e[i]);return this},t.prototype.resetDraw=function(){for(var t=this.draws,e=0;e<t.length;e++)this[t[e].type](t[e].obj,t[e].id);return this},t.prototype.rect=function(t,e){if(!(s(t)&&s(t.point)&&h(t.width)&&h(t.height)))throw"rect param is error";var r=this.base,o=this.context,n=t.point.x,i=t.point.y,a=t.width,c=t.height,p=[n,i,a,c,t.transform];return o.save(),o.globalCompositeOperation=t.globalCompositeOperation||"source-over",o.beginPath(),r._setStyle(t.style,t.shadow),r.rect(n,i,a,c,t.transform),r._draw(t),o.restore(),this.set("rect",t,p,e),this},t.prototype.arc=function(t,e){if(!s(t)||!s(t.point)||!h(t.radius))throw"arc param is error";var r=this.base,o=this.context,n=t.point.x,i=t.point.y,a=t.radius,c=t.radian&&t.radian.start?t.radian.start:0,p=t.radian&&t.radian.end?t.radian.end:2*Math.PI;return o.save(),o.beginPath(),r._setStyle(t.style,t.shadow),r.arc(n,i,a,c,p,!!t.clockwise,t.transform),r._draw(t),o.restore(),this.set("arc",t,[n,i,a,c,p,!!t.clockwise,t.transform],e),this},t.prototype.roundRect=function(t,e){if(!(s(t)&&s(t.point)&&h(t.width)&&h(t.height)))throw"roundRect param is error";for(var r=this.base,o=this.context,n=t.point.x,i=t.point.y,c=t.width,p=t.height,l=c/2,u=p/2,f=h(t.radius)?[t.radius,t.radius,t.radius,t.radius]:a(t.radius)?t.radius:[0,0,0,0],y=0;4>y;y++)f[y]=Math.min(l,u,f[y]);return o.save(),o.beginPath(),r._setStyle(t.style,t.shadow),r.roundRect(n,i,c,p,f,t.transform),r._draw(t),o.restore(),this.set("roundRect",t,[n,i,c,p,f,t.transform],e),this},t.prototype.lineFrame=function(t,e){if(!a(t.point)||!t.point.length)throw"lineFrame param is error";var r=this.base,o=this.context,n=t.point;return o.save(),o.beginPath(),r._setStyle(t.style,t.shadow),r.lineFrame(n,t.transform),r._draw(t),o.restore(),this.set("lineFrame",t,[n,t.transform],e),this},t.prototype.polygon=function(t,e){if(!s(t)||!s(t.point)||!h(t.radius))throw"polygon param is error";for(var r=this.base,o=this.context,n=t.point.x,i=t.point.y,a=t.radius,c=[],p=h(t.sides)&&t.sides>2?t.sides:3,l=t.startAngle||0,u=2*Math.PI/p,f=0;p>f;f++)c.push({x:n+a*Math.sin(l),y:i-a*Math.cos(l)}),l+=u;return t.closePath=!0,o.save(),o.beginPath(),r._setStyle(t.style,t.shadow),r.polygon(c,t.transform),r._draw(t),o.restore(),this.set("polygon",t,[c,t.transform],e),this},t.prototype.line=function(t,e){if(!a(t.point)||t.point.length<2)throw"line param is error";var r=this.base,o=this.context,n=[{x:t.point[0].x,y:t.point[0].y},{x:t.point[1].x,y:t.point[1].y}];return o.save(),o.beginPath(),r._setStyle(t.style,t.shadow),r.line(n,t.transform),r._draw(t),o.restore(),this.set("line",t,[n,t.transform],e),this},t.prototype.dashedLine=function(t,e){if(!a(t.point)||t.point.length<2)throw"dashedLine param is error";for(var r=this.base,o=this.context,n=h(t.gap)?t.gap:10,i=t.point[0].x,s=t.point[0].y,c=t.point[1].x,p=t.point[1].y,l=c-i,u=p-s,f=Math.floor(Math.sqrt(l*l+u*u)/n),y=l/f,d=u/f,v=[],m=0;f>m;m++)v.push({type:m%2===0?"moveTo":"lineTo",x:i+y*m,y:s+d*m});return v.push({type:"lineTo",x:c,y:p}),o.save(),o.beginPath(),r._setStyle(t.style,t.shadow),r.dashedLine(v,t.transform),o.stroke(),o.restore(),this.set("dashedLine",t,[v,t.transform],e),this},t.prototype.bezier=function(t,e){if(!a(t.point)||t.point.length<2||!a(t.controlPoints)||!t.controlPoints.length)throw"bezier param is error";var r=this.base,o=this.context;return o.save(),o.beginPath(),r._setStyle(t.style,t.shadow),r.bezier(t.point[0].x,t.point[0].y,t.point[1].x,t.point[1].y,t.controlPoints,t.transform),r._draw(t),o.restore(),this.set("bezier",t,[t.point[0].x,t.point[0].y,t.point[1].x,t.point[1].y,t.controlPoints,t.transform],e),this},t.prototype.image=function e(t,r){function o(e){a.save(),a.beginPath(),i._setStyle(t.style,t.shadow),i._transform(t.transform),u&&f?a.drawImage(e,h,p,u,f):a.drawImage(e,h,p),a.restore(),n.set("image",t,y,r)}if(!s(t)||!t.image||!s(t.point))throw"image param is error";var n=this,i=this.base,a=this.context,h=t.point.x,p=t.point.y,u=t.width,f=t.height,y=[h,p,u,f,t.transform],e=null;if(c(t.image))e=new Image,e.src=t.image,e.onload=function(){o(e)};else{if(!l(t.image))throw"image param is error";e=t.image,o(e)}return this},t.prototype.clip=function(t,e){var r=this.context,o=this.base;p(o[t])&&(r.beginPath(),o[t].apply(o,e),r.closePath(),r.clip())},t.prototype.on=function(t,e){return this.event=this.event?this.event:{},this.event[t]&&a(this.event[t])?this.event[t].push(e):this.event[t]=[e],this},t}();e.Draw=f},function(t,e){"use strict";function r(t){return function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"}}function o(e){var r={};for(var n in e)t.exports.isObject(e[n])?r[n]=o(e[n]):r[n]=e[n];return r}Object.defineProperty(e,"__esModule",{value:!0});var n={isObject:r("Object"),isNumber:r("Number"),isString:r("String"),isArray:Array.isArray?Array.isArray:r("Array"),isFunction:r("Function"),isNode:function(t){return t.nodeType},merge:o};e.Util=n},function(t,e,r){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),i=n.Util.isObject,s=n.Util.isArray,a=function(){function t(e){o(this,t),this.context=e}return t.prototype._transform=function(t){var e=this.context;t&&(t.rotate&&e.rotate(t.rotate),t.scale&&e.scale(t.scale.x,t.scale.y),t.translate&&e.translate(t.translate.x,t.translate.y),s(t.transform)&&e.transform.apply(e,t.transform),s(t.setTransform)&&e.setTransform.apply(e,t.setTransform))},t.prototype.rect=function(t,e,r,o,n){this._transform(n),this.context.rect(t,e,r,o)},t.prototype.arc=function(t,e,r,o,n,i,s){this._transform(s),this.context.arc(t,e,r,o,n,i)},t.prototype.roundRect=function(t,e,r,o,n,i){var s=this.context;this._transform(i),s.moveTo(t,e+n[0]),s.arcTo(t,e,t+n[0],e,n[0]),s.arcTo(t+r,e,t+r,e+n[1],n[1]),s.arcTo(t+r,e+o,t+r-n[2],e+o,n[2]),s.arcTo(t,e+o,t,e+o-n[3],n[3]),s.lineTo(t,e+n[0])},t.prototype.lineFrame=function(t,e){var r=this.context;this._transform(e),r.moveTo(t[0].x,t[0].y);for(var o=1;o<t.length;o++)r.lineTo(t[o].x,t[o].y)},t.prototype.polygon=function(t,e){this.lineFrame(t,e)},t.prototype.line=function(t,e){this.lineFrame(t,e)},t.prototype.dashedLine=function(t,e){var r=this.context;this._transform(e);for(var o=0;o<t.length;o++)r[t[o].type](t[o].x,t[o].y)},t.prototype.bezier=function(t,e,r,o,n,i){var s=this.context;this._transform(i),s.moveTo(t,e),1===n.length?s.quadraticCurveTo(n[0].x,n[0].y,r,o):s.bezierCurveTo(n[0].x,n[0].y,n[1].x,n[1].y,r,o)},t.prototype.image=function(t,e,r,o,n){this.rect(t,e,r,o,n)},t.prototype._shadow=function(t){if(i(t)){var e=this.context;e.shadowColor=t.color,e.shadowOffsetX=t.offsetX||0,e.shadowOffsetY=t.offsetY||0,e.shadowBlur=t.blur||0}},t.prototype._setStyle=function(t,e){var r=this.context;t=i(t)?t:{},r.lineWidth=t.lineWidth||.5,r.strokeStyle=t.color?t.color:"",r.fillStyle=t.color?t.color:"",this._shadow(e)},t.prototype._draw=function(t){var e=this.context;"fill"===t.type?(e.closePath(),e.fill()):"all"===t.type?(e.closePath(),e.fill(),e.stroke()):(t.closePath&&e.closePath(),e.stroke())},t}();e.Base=a}]);//# sourceMappingURL=index.js.map